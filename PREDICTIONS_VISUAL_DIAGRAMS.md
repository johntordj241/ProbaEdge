# ğŸ¯ SchÃ©mas Visuels: GÃ©nÃ©ration des PrÃ©dictions

## 1. Architecture GÃ©nÃ©rale du Moteur de PrÃ©diction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ENTRÃ‰ES DISPONIBLES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Standings         â”‚  Fixtures         â”‚  Live Stats      â”‚  Contexte        â”‚
â”‚  (buts/match)      â”‚  (Ã©quipes)        â”‚  (score, minute) â”‚  (mÃ©tÃ©o, repos)  â”‚
â”‚  Elo Rating        â”‚  (venue)          â”‚  (tirs, xG)      â”‚  (blessures)     â”‚
â”‚  Historique        â”‚  (date/heure)     â”‚  (possession)    â”‚  (suspensions)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CALCUL DES FORCES (xG)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Attack Rating (Î») = (Buts/Match) Ã— (DÃ©f Adversaire) / (DÃ©f Ligue)          â”‚
â”‚  Defense Rating    = Buts EncaissÃ©s / Match                                  â”‚
â”‚  Elo Correction    = Î» Ã— exp((0.6 Ã— delta_elo) / 400)                        â”‚
â”‚  Avantage Domicile = Ã—1.10                                                    â”‚
â”‚                                                                                â”‚
â”‚  RÃ©sultat: Î»_home, Î»_away (Expected Goals)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AJUSTEMENTS CONTEXTUELS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MÃ©tÃ©o          â†’ -5%      â”‚  Carton rouge  â†’ -25%   â”‚  Repos <48h   â†’ -7%   â”‚
â”‚  Vent >30 km/h  â†’ -7%      â”‚  Suspension    â†’ -7%    â”‚  Repos <72h   â†’ -3%   â”‚
â”‚  Blessure clÃ©   â†’ -5%      â”‚  Fatigue       â†’ -5%    â”‚  Arbitre sÃ©vÃ¨re â†’ +3% â”‚
â”‚                                                                                â”‚
â”‚  Î»_home_adj = Î»_home Ã— (facteurs)                                             â”‚
â”‚  Î»_away_adj = Î»_away Ã— (facteurs)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GÃ‰NÃ‰RATION MATRICE POISSON BIVARIÃ‰E 6Ã—6                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                â”‚
â”‚         0          1          2          3          4          5+            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  0 â”‚ 0.228      0.340      0.255      0.128      0.048      0.001 â”‚ Domicile â”‚
â”‚  1 â”‚ 0.294      0.440      0.329      0.165      0.061      0.002 â”‚   xG    â”‚
â”‚  2 â”‚ 0.220      0.329      0.246      0.123      0.046      0.002 â”‚  1.49   â”‚
â”‚  3 â”‚ 0.110      0.164      0.123      0.062      0.023      0.001 â”‚         â”‚
â”‚  4 â”‚ 0.041      0.061      0.046      0.023      0.009      0.000 â”‚         â”‚
â”‚  5+â”‚ 0.012      0.018      0.014      0.007      0.003      0.000 â”‚         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
â”‚     ExtÃ©rieur xG 1.92                                               â”‚         â”‚
â”‚                                                                                â”‚
â”‚  Mode: "dc" (Double Chance)  |  rho=0.03 (corrÃ©lation)  |  tau=0.06         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  AGRÃ‰GATION PARALLÃˆLE     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â†“           â†“           â†“            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   1X2   â”‚  â”‚ OVER/U â”‚  â”‚ BTTS   â”‚  â”‚ OTHER  â”‚
    â”‚PROBS   â”‚  â”‚ PROBS  â”‚  â”‚ PROBS  â”‚  â”‚ MARKETSâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“           â†“           â†“            â†“
    home 35%   over 55%    yes 72%      HT/FT
    draw 22%   under 45%   no 28%       Handicap
    away 43%                            etc.
```

---

## 2. ChaÃ®ne BTTS DÃ©taillÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CALCUL BTTS (BOTH TEAMS TO SCORE)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 1: Matrice Poisson gÃ©nÃ©rÃ©e
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Away Goals                                 â”‚
â”‚    0    1    2    3   ...                        â”‚
â”‚  0â”‚ 0.2  0.3  0.25  ... â† i=0 (home=0)       â”‚
â”‚  1â”‚ 0.3  0.4  0.33  ...                       â”‚
â”‚H 2â”‚ 0.22 0.33 0.25  ... â† i=2                â”‚
â”‚o 3â”‚ 0.11 0.16 0.12  ...                       â”‚
â”‚m 4â”‚ ... LIGNE 4 (home=4) ...                 â”‚
â”‚e â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 2: Identifier cellules BTTS (i>0 AND j>0)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Away Goals                                     â”‚
â”‚    0    1    2    3   ...                            â”‚
â”‚  0â”‚ âœ—    âœ—    âœ—    ...  â† Away=0, pas de BTTS      â”‚
â”‚  1â”‚ âœ—    âœ“âœ“âœ“  âœ“âœ“âœ“  ...  â† Home=1 ET Away>0 âœ“     â”‚
â”‚H 2â”‚ âœ—    âœ“âœ“âœ“  âœ“âœ“âœ“  ...  â† Home=2 ET Away>0 âœ“     â”‚
â”‚o 3â”‚ âœ—    âœ“âœ“âœ“  âœ“âœ“âœ“  ...  â† Home=3 ET Away>0 âœ“     â”‚
â”‚m 4â”‚ âœ—    âœ“âœ“âœ“  âœ“âœ“âœ“  ...  â† Home=4 ET Away>0 âœ“     â”‚
â”‚e â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    â†‘
â”‚    Home=0, pas de BTTS
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 3: Sommer probabilitÃ©s
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BTTS_YES = 0.40 + 0.33 + 0.16 + ... â”‚ = 0.72
â”‚                                       â”‚
â”‚ BTTS_NO = 1 - 0.72 = 0.28            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 4: DÃ©cision PrÃ©diction
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SI BTTS_YES >= 0.50:          â”‚
â”‚   PrÃ©diction: "BTTS OUI"      â”‚
â”‚   Confiance: 72%              â”‚
â”‚                                â”‚
â”‚ SINON:                         â”‚
â”‚   PrÃ©diction: "BTTS NON"      â”‚
â”‚   Confiance: 28%              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ AUCUNE INTERVENTION ML                      â”‚
â”‚ â€¢ Calcul 100% mathÃ©matique                     â”‚
â”‚ â€¢ BasÃ© UNIQUEMENT sur Poisson                  â”‚
â”‚ â€¢ Pas d'apprentissage machine                  â”‚
â”‚ â€¢ Pas de correction historique                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ChaÃ®ne main_pick DÃ©taillÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CALCUL MAIN_PICK (PRÃ‰DICTION PRINCIPALE)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 1: AgrÃ©gation 1X2 depuis Poisson
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Away Goals                                     â”‚
â”‚    0    1    2    3   ...                            â”‚
â”‚  0â”‚ âœ“âœ“   âœ“    âœ“    ...  â† Domicile=0 â†’ NULS âœ—    â”‚
â”‚  1â”‚ âœ“    âœ“    âœ“    ...  â† Nuls (1=1) âœ—             â”‚
â”‚H 2â”‚ âœ“    âœ“    âœ“âœ“âœ“  ...  â† Domicile>Away âœ“        â”‚
â”‚o 3â”‚ âœ“    âœ“    âœ“    ...  â† Domicile>Away âœ“        â”‚
â”‚m 4â”‚ âœ“    âœ“    âœ“    ...  â† Domicile>Away âœ“        â”‚
â”‚e â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sommes:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOMICILE = Î£ prob(home > away) = 0.35   â”‚
â”‚ NULS     = Î£ prob(home = away) = 0.22   â”‚
â”‚ EXTÃ‰RIEUR= Î£ prob(away > home) = 0.43   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 2: SÃ©lection DÃ©terministe
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ max(0.35, 0.22, 0.43) = 0.43 (EXTÃ‰RIEUR)        â”‚
â”‚                                                    â”‚
â”‚ main_choice = ("away", 0.43)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 3: GÃ©nÃ©ration Label
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IF main_choice[0] == "away":                       â”‚
â”‚   label = f"Victoire {away_team}"                  â”‚
â”‚   reason = f"{away_team} affiche xG attendus"     â”‚
â”‚                                                     â”‚
â”‚ RÃ©sultat: {                                        â”‚
â”‚   "label": "Victoire Manchester City",             â”‚
â”‚   "probability": 0.43,                             â”‚
â”‚   "reason": "..."                                  â”‚
â”‚ }                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 4: Enregistrement
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INSERTION EN BASE DE DONNÃ‰ES:                  â”‚
â”‚ â€¢ main_pick = "Victoire Manchester City"       â”‚
â”‚ â€¢ main_confidence = 43 (%)                     â”‚
â”‚ â€¢ prob_home = 0.35                             â”‚
â”‚ â€¢ prob_draw = 0.22                             â”‚
â”‚ â€¢ prob_away = 0.43                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ AUCUNE INTERVENTION ML                      â”‚
â”‚ â€¢ Choix = argmax simple (MAX)                  â”‚
â”‚ â€¢ Label gÃ©nÃ©rÃ© du texte                        â”‚
â”‚ â€¢ Pas d'apprentissage machine                  â”‚
â”‚ â€¢ Pas de correction historique                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Flux ML Optionnel (Post-PrÃ©diction)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CALIBRATION ML (OPTIONNELLE - Ã‰TAPE 7)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT: ProbabilitÃ©s Poisson brutes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                        â”‚
â”‚   "home": 0.35,                          â”‚
â”‚   "draw": 0.22,                          â”‚
â”‚   "away": 0.43,                          â”‚
â”‚   "over_2_5": 0.55,                      â”‚
â”‚   "under_2_5": 0.45                      â”‚
â”‚ }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 1: Charger modÃ¨le ML
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ model = load("models/                   â”‚
â”‚           match_outcome_model.joblib")  â”‚
â”‚                                          â”‚
â”‚ SI fichier n'existe pas:                â”‚
â”‚   â†’ Retourner probas Poisson inchangÃ©es â”‚
â”‚                                          â”‚
â”‚ SI erreur de chargement:                â”‚
â”‚   â†’ Fallback Poisson                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 2: Construire vecteur de features
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ features = {                                   â”‚
â”‚   # ProbabilitÃ©s Poisson brutes              â”‚
â”‚   "prob_home": 0.35,                          â”‚
â”‚   "prob_draw": 0.22,                          â”‚
â”‚   "prob_away": 0.43,                          â”‚
â”‚   "prob_over_2_5": 0.55,                      â”‚
â”‚   "prob_under_2_5": 0.45,                     â”‚
â”‚   # DÃ©rivÃ©es                                   â”‚
â”‚   "feature_home_draw_diff": 0.13,              â”‚
â”‚   "feature_home_away_diff": -0.08,             â”‚
â”‚   "feature_over_under_diff": 0.10,             â”‚
â”‚   "feature_max_prob": 0.43,                    â”‚
â”‚   "feature_main_confidence_norm": 0.43,        â”‚
â”‚   "feature_total_pick_over": 1.0,              â”‚
â”‚   # MÃ©tadonnÃ©es                                â”‚
â”‚   "feature_lambda_home": 1.49,                 â”‚
â”‚   "feature_lambda_away": 1.92,                 â”‚
â”‚   "elo_home": 1650,                            â”‚
â”‚   "elo_away": 1800,                            â”‚
â”‚   "delta_elo": -150,                           â”‚
â”‚   "pressure_score": 0.45,  (live only)        â”‚
â”‚   "intensity_score": 52    (live only)        â”‚
â”‚ }                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 3: PrÃ©diction ML
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ predicted = model.predict_proba(       â”‚
â”‚   features_vector                      â”‚
â”‚ )[0]                                    â”‚
â”‚                                         â”‚
â”‚ classes = ["away", "draw", "home"]     â”‚
â”‚                                         â”‚
â”‚ ml_probs = {                            â”‚
â”‚   "away": 0.42,    (â† LÃ©gÃ¨rement ajust)â”‚
â”‚   "draw": 0.21,                         â”‚
â”‚   "home": 0.37     (â† LÃ©gÃ¨rement ajust)â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 4: Normalisation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ probs_ml_norm = normalize(ml_probs)    â”‚
â”‚                                         â”‚
â”‚ RÃ©sultat final:                         â”‚
â”‚ {                                       â”‚
â”‚   "home": 0.37,   (Poisson 0.35 +2%)   â”‚
â”‚   "draw": 0.21,   (Poisson 0.22 -1%)   â”‚
â”‚   "away": 0.42    (Poisson 0.43 -1%)   â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ IMPACT ML LIMITÃ‰                               â”‚
â”‚ â€¢ Ã‰cart max: Â±2-3% par probabilitÃ©               â”‚
â”‚ â€¢ N'affecte PAS la dÃ©cision (away reste le max)  â”‚
â”‚ â€¢ Fallback automatique en cas d'erreur            â”‚
â”‚ â€¢ main_pick reste "Victoire Manchester City"     â”‚
â”‚ â€¢ BTTS reste calculÃ© depuis Poisson              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Comparaison Poisson vs ML

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POISSON vs ML                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

POISSON (Primaire)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input  : Î»_home, Î»_away (xG)         â”‚
â”‚ Process: Matrix 6Ã—6 + Aggregation   â”‚
â”‚ Output : {home, draw, away,          â”‚
â”‚          over, under, btts, ...}    â”‚
â”‚ Time   : < 1 ms                      â”‚
â”‚ Depend : Standings only              â”‚
â”‚ Error  : TrÃ¨s rare (<0.01%)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
   UtilisÃ© directement pour:
   â€¢ main_pick (argmax)
   â€¢ BTTS (agrÃ©gation spÃ©cifique)
   â€¢ Over/Under (agrÃ©gation)
   â€¢ Tous les tips

ML (Secondaire)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input  : Probas Poisson + metadata   â”‚
â”‚ Process: Random Forest / XGBoost     â”‚
â”‚ Output : {home, draw, away}          â”‚
â”‚          (recalibration)             â”‚
â”‚ Time   : 5-50 ms                     â”‚
â”‚ Depend : Dataset historique          â”‚
â”‚ Error  : â‰¤5% (peut failback)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
   UtilisÃ© UNIQUEMENT pour:
   â€¢ Recalibration probabilitÃ©s 1X2
   â€¢ PAS BTTS
   â€¢ PAS Over/Under
   â€¢ PAS main_pick (juste ajustement)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RÃ‰SUMÃ‰:                                         â”‚
â”‚ â€¢ Poisson = Fondement (100% utilisÃ©)           â”‚
â”‚ â€¢ ML = Vernis (optionnel, â‰¤2% d'impact)       â”‚
â”‚ â€¢ Aucun ne domine l'autre:                     â”‚
â”‚   - Poisson trop imprÃ©cis parfois              â”‚
â”‚   - ML risque d'overfitting                    â”‚
â”‚   - Combinaison: stabilitÃ© + adaptabilitÃ©      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Arbre DÃ©cisionnel Complet

```
                                START
                                  â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Charger Standings       â”‚
                    â”‚ Charger Fixtures       â”‚
                    â”‚ Charger Context        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ CALCUL xG (Expected    â”‚
                    â”‚ Goals) par Ã©quipe      â”‚
                    â”‚ + Elo + Avantage Home  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Appliquer Contexte:    â”‚
                    â”‚ â€¢ MÃ©tÃ©o                 â”‚
                    â”‚ â€¢ Blessures             â”‚
                    â”‚ â€¢ Suspensions          â”‚
                    â”‚ â€¢ Mi-temps (if live)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GÃ©nÃ©rer Matrice        â”‚
        â”‚           â”‚ Poisson 6Ã—6            â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â†“
        â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚ AgrÃ©ger Markets         â”‚
        â”‚           â”‚ (home, draw, away,      â”‚
        â”‚           â”‚  over, under, btts...)  â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“                                    â†“             â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ DÃ‰CISION 1X2:      â”‚  â”‚ DÃ‰CISION     â”‚  â”‚ DÃ‰CISION   â”‚
            â”‚ argmax(home,draw,  â”‚  â”‚ BTTS:        â”‚  â”‚ OVER/UNDER:â”‚
            â”‚       away)        â”‚  â”‚ >= 0.50?     â”‚  â”‚ >= 0.55?   â”‚
            â”‚                    â”‚  â”‚              â”‚  â”‚            â”‚
            â”‚ RÃ©sultat:          â”‚  â”‚ RÃ©sultat:    â”‚  â”‚ RÃ©sultat:  â”‚
            â”‚ "Victoire Team"    â”‚  â”‚ "BTTS Yes"   â”‚  â”‚ "Over 2.5" â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ ou "Non"     â”‚  â”‚ ou "Under" â”‚
                    â†“               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â†“                    â†“
                              (Aucun ML)               (Aucun ML)
                                        â†“                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ main_pick = "Victoire Team"         (100% Poisson)       â”‚
        â”‚ btts_prediction = "Yes/No"          (100% Poisson)       â”‚
        â”‚ total_pick = "Over/Under 2.5"       (100% Poisson)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ [OPTIONNEL] VÃ©rifier ML Model:                            â”‚
        â”‚   SI models/match_outcome_model.joblib existe:           â”‚
        â”‚     â†’ Charger modÃ¨le                                      â”‚
        â”‚     â†’ Construire features                                 â”‚
        â”‚     â†’ PrÃ©dire probabilitÃ©s recalibrÃ©es                    â”‚
        â”‚     â†’ Remplacer {home, draw, away} UNIQUEMENT             â”‚
        â”‚     â†’ BTTS et Over/Under restent inchangÃ©s                â”‚
        â”‚   SINON:                                                   â”‚
        â”‚     â†’ Garder probabilitÃ©s Poisson brutes                  â”‚
        â”‚     â†’ Continuer                                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ GÃ©nÃ©rer Tous les Tips (Victoire, Over/Under,              â”‚
        â”‚ BTTS, Double Chance, Handicap, HT/FT, Buteurs)           â”‚
        â”‚ Base: probabilitÃ©s + rÃ¨gles simples de seuil               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ SÃ©lectionner Tips avec Edge (Kelly / % Bankroll)          â”‚
        â”‚ Trier par confiance + EV                                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Enregistrer en BD:                                          â”‚
        â”‚ â€¢ prediction_history.csv                                   â”‚
        â”‚ â€¢ Colonnes: main_pick, main_confidence,                    â”‚
        â”‚            prob_home/draw/away, prob_over/under_2_5,      â”‚
        â”‚            betting_tips (JSON), ...                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
                                 END
```

---

## 7. DÃ©cision finale par type de prÃ©diction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MATRICE DÃ‰CISIONNELLE FINALE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

PRÃ‰DICTION          ALGORITHME                 ML?          ENTRÃ‰E
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
main_pick           max(P1, PN, P2)           Non          Î»
BTTS                Î£(i>0âˆ§j>0)               Non          Î»
Over 2.5            Î£(i+jâ‰¥3)                 Non          Î»
Under 2.5           Î£(i+j<3)                 Non          Î»
Double 1X           P1 + PN                  Non          Î»
Double X2           PN + P2                  Non          Î»
Handicap -1         Î£(i-jâ‰¥2)                 Non          Î»
HT/FT Combos        AgrÃ©gation hybride       Non          Î» + temps
Clean Sheet         Î£(0 aux opposants)       Non          Î»
Buteurs             Binomiale + Poisson      Non          Stats
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Recalibration 1X2   Classifier ML             Oui*         Poisson
*(optionnel, fallback si absent)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONCLUSION DÃ‰FINITIVE:                                             â”‚
â”‚ â€¢ Toutes les prÃ©dictions PRIMAIRES = 0% ML                        â”‚
â”‚ â€¢ ML n'intervient qu'en CALIBRATION SECONDAIRE                    â”‚
â”‚ â€¢ Fallback automatique: probas Poisson brutes en cas d'erreur     â”‚
â”‚ â€¢ aucune prÃ©diction ne dÃ©pend du ML (toutes dÃ©terministes)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Timeline Temporelle d'une PrÃ©diction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CHRONOLOGIE D'UNE PRÃ‰DICTION PRÃ‰-MATCH                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T-0ms    Demande de prÃ©diction via API
         â””â”€ Fixture ID, League, Season

T+10ms   Fetch Standings & Elo Ratings
         â””â”€ Calcul xG: Î»_home, Î»_away

T+20ms   Load Context (MÃ©tÃ©o, Blessures, Suspensions)
         â””â”€ Ajustements: Î»_home_adj, Î»_away_adj

T+25ms   GÃ©nÃ©rer Matrice Poisson 6Ã—6 (1500 cellules)
         â””â”€ Mode bivariate, normalisÃ©

T+26ms   AgrÃ©ger Markets:
         â”œâ”€ 1X2:       15ms
         â”œâ”€ Over/Under: 2ms
         â””â”€ BTTS:       1ms

T+27ms   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ RÃ‰SULTATS DISPONIBLES:           â”‚
         â”‚ â€¢ main_pick = "Victoire"        â”‚
         â”‚ â€¢ btts_prob = 0.72              â”‚
         â”‚ â€¢ over_prob = 0.55              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+28ms   [SI ML DISPONIBLE]
         Charger modÃ¨le (5ms)
         â”œâ”€ Build features (5ms)
         â”œâ”€ Predict (10ms)
         â””â”€ Normalize (2ms)

T+40ms   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ RÃ‰SULTATS FINAUX (ML calibrÃ©s):  â”‚
         â”‚ â€¢ home: 0.35 â†’ 0.37 (ajustÃ©)    â”‚
         â”‚ â€¢ draw: 0.22 â†’ 0.21             â”‚
         â”‚ â€¢ away: 0.43 â†’ 0.42             â”‚
         â”‚ â€¢ main_pick toujours "Victoire" â”‚
         â”‚ â€¢ BTTS inchangÃ© = 0.72          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+41ms   GÃ©nÃ©rer Tips avec Seuils
         â”œâ”€ Victoire (seuil >0.30)
         â”œâ”€ BTTS (seuil >0.50)
         â”œâ”€ Over 2.5 (seuil >0.50)
         â””â”€ Double Chance (auto)

T+42ms   Enregistrer en BD:
         prediction_history.csv
         â”œâ”€ main_pick
         â”œâ”€ ProbabilitÃ©s
         â”œâ”€ Tips (JSON)
         â””â”€ Timestamp

T+43ms   Retourner rÃ©ponse API
         â””â”€ JSON complet pour UI

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEMPS TOTAL: ~43ms            â”‚
â”‚ â€¢ Poisson: 27ms (63%)         â”‚
â”‚ â€¢ ML: 12ms (28%) - optionnel  â”‚
â”‚ â€¢ Admin: 4ms (9%)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Impact Contextuel sur ProbabilitÃ©s

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXEMPLE: IMPACT AJUSTEMENTS CONTEXTE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BASE Poisson: Î»_home = 1.50

CONTEXTE FAVORABLE domicile:
â”œâ”€ Repos >72h               â†’ Ã—1.00 (neutre)
â”œâ”€ Beau temps              â†’ Ã—1.00 (neutre)
â”œâ”€ Pas de blessure majeure  â†’ Ã—1.00 (neutre)
â””â”€ RÃ‰SULTAT: Î»_home = 1.50

CONTEXTE DÃ‰FAVORABLE domicile:
â”œâ”€ Carton rouge             â†’ Ã—0.75 (sÃ©vÃ¨re!)
â”œâ”€ Repos <48h               â†’ Ã—0.93
â”œâ”€ Blessure clÃ©            â†’ Ã—0.95
â””â”€ Pluie forte              â†’ Ã—0.95
â””â”€ RÃ‰SULTAT: Î»_home = 1.50 Ã— (0.75 Ã— 0.93 Ã— 0.95 Ã— 0.95)
           = 1.50 Ã— 0.638
           = 0.96 (40% de rÃ©duction!)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMPACT sur PrÃ©dictions:                â”‚
â”‚                                         â”‚
â”‚ AVANT contexte:                         â”‚
â”‚ â€¢ home: 0.48 â†’ main_pick: "1"         â”‚
â”‚ â€¢ btts: 0.65                           â”‚
â”‚                                         â”‚
â”‚ APRÃˆS contexte (carton rouge):          â”‚
â”‚ â€¢ home: 0.32 â†’ main_pick: "2"         â”‚
â”‚ â€¢ btts: 0.48                           â”‚
â”‚                                         â”‚
â”‚ Changement = MAJEUR (20% d'Ã©cart)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. LÃ©gende des Symboles

```
Î»       = Expected Goals (xG) - Buts attendus
P1      = ProbabilitÃ© Victoire Domicile
PN/PX   = ProbabilitÃ© Nul
P2      = ProbabilitÃ© Victoire ExtÃ©rieur
Î£       = Somme/AgrÃ©gation
âˆ§       = ET logique
âˆ¨       = OU logique
>       = SupÃ©rieur Ã 
<       = InfÃ©rieur Ã 
â‰¥       = SupÃ©rieur ou Ã©gal
â‰¤       = InfÃ©rieur ou Ã©gal
â‰        = DiffÃ©rent de
Ï„ (tau) = ParamÃ¨tre Double Chance (0.06)
Ï (rho) = ParamÃ¨tre CorrÃ©lation (0.03)
T+Xms   = Temps Ã©coulÃ© (millisecondes)
âœ“       = Inclus/Oui
âœ—       = Exclu/Non
```

---

**GÃ©nÃ©rÃ©:** 2 fÃ©vrier 2026  
**Fichiers de rÃ©fÃ©rence:** predictions.py, prediction_model.py, dashboard.py  
**ModÃ¨le ML:** match_outcome_model.joblib (optionnel)
